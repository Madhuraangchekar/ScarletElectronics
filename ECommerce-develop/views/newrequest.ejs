<!DOCTYPE html>
<html>

<head>
    <meta charset="ISO-8859-1">
    <title>New Request</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
    <script>
        window.embeddedChatbotConfig = {
        chatbotId: "1zNB5BiGzrd5SP6_m3NKY",
        domain: "www.chatbase.co"
        }
        </script>
        <script
        src="https://www.chatbase.co/embed.min.js"
        chatbotId="1zNB5BiGzrd5SP6_m3NKY"
        domain="www.chatbase.co"
        defer>
        </script>
</head>

<body>
    <%- include('Common/header3.ejs') %>
    <div align="center">
        <br> <br>
        <h1 class="text-center mx-auto">Create New Request</h1>
        <br>
        <h2 class="text-center"></h2>
        <form method="POST" action="/users/support/newrequest" onsubmit="formatDate()">
            <div class="col-md-3 align-self-center mx-auto">
                <label for="name" class="form-label text-left">Name</label> <input type="text"
                    class="form-control text-left" id="name" name="name" onchange="allLetter('a')" required>
            </div>
            <br>
            <div class="col-md-3 align-self-center mx-auto">
                <label for="emailId" class="form-label">Email:</label> <input type="email" class="form-control"
                    id="emailId" name="emailId" name="email" placeholder="Enter Your Email" onchange="validateEmail();">
                <div id="emailHelp" class="form-text">We'll never share your
                    email with anyone else.</div>
            </div>
            <br>

            <div class="col-md-3 align-self-center mx-auto">
                <label for="listingId" class="form-label text-left">ListingId/Order Number</label>
                <input type="text" class="form-control text-left" id="listingId" name="listingId">


            </div>
            <br>
            
            <div class="col-md-3 align-self-center mx-auto">
                <label for="update_description" class="form-label text-left">Description</label> <textarea type="text"
                    class="form-control text-left" id="update_description" name="update_description" onchange="allLetter('a')" required></textarea>
            </div>
            <br>
           
            <br> <br>
            <div class="col-md-3 text-center mx-auto">
                <button type="submit" class="btn btn-primary align-self-center">Submit</button>
            </div>
        </form>
    </div>

    <script src="formValidation.js"></script>
    <script type="text/javascript">
        // Your existing JS code here

        function formatDate() {
            // Get the input element
            var dobInput = document.getElementById('dob');

            // Get the entered value
            var inputValue = dobInput.value;

            // Split the entered value by "/"
            var dateParts = inputValue.split('/');

            // Rearrange the parts to match "YYYY-MM-DD" format
            var formattedDate = dateParts[2] + '-' + dateParts[0] + '-' + dateParts[1];
            console.log('Formatted Date:', formattedDate);

            // Set the formatted date back to the input
            dobInput.value = formattedDate;
        }
        function validateEmail() {
            var uemail = document.getElementById('emailId');
            var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            if (uemail.value.match(mailformat)) {
                return true;
            }
            alert("You have entered an invalid email address!");
            uemail.focus();
            return false;
        }
    </script>

</body>

</html>
